# Проект: Браузерная 3D гоночная игра с реалистичной физикой машинки

Этот проект направлен на создание полностью браузерной 3D гоночной игры. На текущем этапе реализована базовая функциональность: 3D-модель машинки со стандартным управлением WASD, реалистичная физика движения на основе Cannon.js, и небольшая тестовая локация. В качестве 3D-движка используется Three.js.

# Отчет о проделанной работе по проекту "3D Racing Game"

## 1. Создание базовой структуры проекта и настройка окружения для 3D
*   **Созданы основные файлы**:
    *   `index.html`: Главный HTML-файл для загрузки игры.
    *   `style.css`: Файл стилей для базового оформления страницы (сброс отступов).
    *   `main.js`: Основной JavaScript-файл, содержащий всю логику игры.
*   **Подключение библиотек**:
    *   Three.js: Подключена CDN-версия для 3D-графики.
    *   Cannon.js: Подключена CDN-версия для физического движка.
*   **Инициализация сцены**:
    *   Настроены `THREE.Scene`, `THREE.PerspectiveCamera` и `THREE.WebGLRenderer`.
    *   Рендерер добавлен в `document.body`.
    *   Для отладки установлен ярко-голубой цвет фона рендерера (`renderer.setClearColor(0x87CEEB)`).
*   **Инициализация физического мира**:
    *   Создан `CANNON.World` и установлена гравитация `(0, -9.82, 0)`.
*   **Настройка освещения**:
    *   Добавлены `THREE.AmbientLight` (рассеянный свет) и `THREE.DirectionalLight` (направленный свет) для базового освещения сцены.
*   **Устранение первоначальных проблем**:
    *   Исправлена опечатка в имени переменной `carGroundContactContactMaterial` на `carGroundContactMaterial` в `main.js`, которая приводила к `ReferenceError` и черному экрану.

## 2. Разработка 3D-модели машинки
*   **Создание тела машинки**:
    *   `carBodyShape`: Определен как `CANNON.Box` для физической модели.
    *   `carBody`: Создано физическое тело `CANNON.Body` с массой 150 кг и начальной позицией `(0, 0.5, 0)`.
    *   `carBodyMesh`: Создана 3D-сетка `THREE.Mesh` в форме куба (`BoxGeometry`) с красным материалом (`MeshLambertMaterial`) для визуализации.
    *   Синхронизация: Позиция и ориентация `carBodyMesh` обновляются из `carBody` в функции `animate`.
*   **Создание колес**:
    *   Определены параметры колес: радиус, толщина, количество сегментов.
    *   `wheelMaterial`: Создан материал Cannon.js для колес.
    *   `wheelGeometry`: Создана геометрия цилиндра (`CylinderGeometry`) для визуализации.
    *   `wheelMeshMaterial`: Создан черный материал для визуализации колес.
    *   Функция `addWheel`: Создана для удобного добавления физических тел колес (`CANNON.Body` в форме цилиндра) и их визуальных представлений (`THREE.Mesh`).
    *   `HingeConstraint`: Использованы шарнирные соединения для прикрепления колес к корпусу машинки, позволяя им вращаться.
    *   Добавлены 4 колеса к машинке (передние и задние).

## 3. Реализация реалистичной физики движения машинки
*   **Контактные материалы**:
    *   `wheelGroundContactMaterial`: Определен контактный материал для взаимодействия колес с землей (трение 0.3, без отскока).
    *   `carGroundContactMaterial`: Определен контактный материал для взаимодействия корпуса машинки с землей (трение 0.3, небольшой отскок 0.1).
*   **Цикл обновления физики**:
    *   В функции `animate` вызывается `world.step(1 / 60, 3)` для обновления физического движка Cannon.js с частотой 60 кадров в секунду и 3 итерациями для точности.

## 4. Настройка управления машинкой с помощью WASD
*   **Обработчики клавиатуры**:
    *   Объект `keys` отслеживает состояние нажатых клавиш.
    *   Обработчики событий `keydown` и `keyup` обновляют состояние `keys`.
*   **Применение сил**:
    *   В функции `animate` на основе нажатых клавиш `W` и `S` вычисляется `engineForce`.
    *   На основе `A` и `D` вычисляется `steer` (угол поворота).
    *   Силы (`applyLocalForce`) применяются к передним колесам для движения.
    *   Ориентация передних колес (`quaternion.setFromAxisAngle`) изменяется для поворотов.

## 5. Создание небольшой 3D-локации для гонок
*   **Создание земли**:
    *   `groundShape`: Определен как `CANNON.Plane` для физической модели земли.
    *   `groundBody`: Создано статическое физическое тело `CANNON.Body` (масса 0) с материалом `groundMaterial`.
    *   `groundMesh`: Создана 3D-сетка `THREE.Mesh` в форме плоскости (`PlaneGeometry`) с зеленым материалом (`MeshLambertMaterial`) для визуализации.
    *   Ориентация `groundBody` и `groundMesh` скорреректирована, чтобы плоскость была горизонтальной.

## Текущий статус:
Все вышеперечисленные задачи реализованы. Машинка, ее физика, управление и базовая локация готовы.

## Задачи на следующий этап (потенциальные):
*   Добавление других объектов на локацию.
*   Улучшение физики (подвеска, более сложные взаимодействия).
*   Реализация различных режимов камеры.
*   Добавление элементов игрового процесса (таймер, счетчик очков, кругов).
*   Оптимизация производительности.
