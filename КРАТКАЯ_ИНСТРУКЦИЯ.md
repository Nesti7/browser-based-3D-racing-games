# üöÄ Cannon.js –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω! –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è —Ñ–∏–∑–∏–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –Ω–∞ **Cannon.js (RaycastVehicle)** –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞!

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- **js/Physics.js** ‚Äî –§–∏–∑–∏—á–µ—Å–∫–∏–π –¥–≤–∏–∂–æ–∫ (300+ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞)
- **INTEGRATION_CANNON.md** ‚Äî –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **–ö–†–ê–¢–ö–ê–Ø_–ò–ù–°–¢–†–£–ö–¶–ò–Ø.md** ‚Äî –≠—Ç–æ—Ç —Ñ–∞–π–ª

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- **index.html** ‚Äî –î–æ–±–∞–≤–ª–µ–Ω Cannon.js –≤ importmap
- **js/Game.js** ‚Äî –°–æ–∑–¥–∞–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Physics
- **js/main.js** ‚Äî –ü–æ–ª–∑—É–Ω–∫–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç Cannon.js –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- **js/models/Truck.js** ‚Äî –ú–∞—Å—Å–∏–≤ wheelMeshes –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **–£–∂–µ —Å–¥–µ–ª–∞–Ω–æ.txt** ‚Äî –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üéÆ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### 1. –ó–∞–ø—É—Å—Ç–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:
```bash
cd /home/rom/–ü–†–æ–µ–∫—Ç–∏–∫–∏/–≥–æ–Ω–æ—á–∫–∏
python3 -m http.server 8000
```

### 2. –û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://localhost:8000
```

### 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
- **‚¨Ü –ì–∞–∑** / W / ‚Üë
- **‚¨á –¢–æ—Ä–º–æ–∑** / S / ‚Üì
- **‚óÄ –í–ª–µ–≤–æ** / A / ‚Üê
- **‚ñ∂ –í–ø—Ä–∞–≤–æ** / D / ‚Üí
- **–ü–†–û–ë–ï–õ** ‚Äî –†—É—á–Ω–æ–π —Ç–æ—Ä–º–æ–∑ (–¥—Ä–∏—Ñ—Ç!)

---

## üèÅ –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–∑–∏–∫—É

### –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã (–Ω–∞ –¥–æ—Ä–æ–≥–µ):
1. **–ò–Ω–µ—Ä—Ü–∏—è** ‚Äî –†–∞–∑–≥–æ–Ω–∏—Å—å –∏ –æ—Ç–ø—É—Å—Ç–∏ –≥–∞–∑. –ì—Ä—É–∑–æ–≤–∏–∫ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∫–∞—Ç–∏—Ç—å—Å—è!
2. **–¢–æ—Ä–º–æ–∂–µ–Ω–∏–µ** ‚Äî –ù–∞–∂–º–∏ —Ç–æ—Ä–º–æ–∑ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏. –ù–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ!
3. **–ü–æ–≤–æ—Ä–æ—Ç—ã** ‚Äî –ù–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–π. –ö—É–∑–æ–≤ –Ω–∞–∫–ª–æ–Ω—è–µ—Ç—Å—è –≤ –ø–æ–≤–æ—Ä–æ—Ç!

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Å—Ç—ã (–Ω–∞ —Å—Ç–∞–¥–∏–æ–Ω–µ 240√ó240–º):
1. **–î–æ–±—Ä–∞—Ç—å—Å—è –¥–æ —Å—Ç–∞–¥–∏–æ–Ω–∞:**
   - –ï–∑–∂–∞–π –ø—Ä—è–º–æ –ø–æ –¥–æ—Ä–æ–≥–µ
   - –ü–æ–≤–µ—Ä–Ω–∏ –í–ü–†–ê–í–û (–∫–Ω–æ–ø–∫–∞ ‚ñ∂ –∏–ª–∏ D)
   - –ù–∞–π–¥–∏ –∑–µ–ª—ë–Ω—É—é —Å—Ç—Ä–µ–ª–∫—É
   - –ï–∑–∂–∞–π –ø–æ –∂—ë–ª—Ç–æ–π —Ä–∞–∑–º–µ—Ç–∫–µ ~100–º
   - –ó–∞–µ–∑–∂–∞–π –≤ –ø—Ä–æ—Ö–æ–¥

2. **–î—Ä–∏—Ñ—Ç:**
   - –†–∞–∑–≥–æ–Ω–∏—Å—å –¥–æ –º–∞–∫—Å–∏–º—É–º–∞ (‚¨Ü)
   - –ù–∞–∂–º–∏ –ü–†–û–ë–ï–õ (—Ä—É—á–Ω–∏–∫)
   - –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø–æ–≤–µ—Ä–Ω–∏ (‚óÄ –∏–ª–∏ ‚ñ∂)
   - –ù–∞—Å–ª–∞–∂–¥–∞–π—Å—è –∑–∞–Ω–æ—Å–æ–º! üí®

3. **"–ü–æ–Ω—á–∏–∫–∏":**
   - –ì–∞–∑ + —Ä—É—á–Ω–∏–∫ + —Ä—É–ª—å –≤ –æ–¥–Ω—É —Å—Ç–æ—Ä–æ–Ω—É
   - –ì—Ä—É–∑–æ–≤–∏–∫ –∫—Ä—É—Ç–∏—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ!

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–∑–∏–∫–∏

### –ß–µ—Ä–µ–∑ UI (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏):
–õ–µ–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª ‚Üí **"‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–∑–∏–∫–∏"**

| –ü–æ–ª–∑—É–Ω–æ–∫ | –ß—Ç–æ –º–µ–Ω—è–µ—Ç |
|----------|------------|
| üöÄ –ú–æ—â–Ω–æ—Å—Ç—å –≤–ø–µ—Ä—ë–¥ | –°–∏–ª–∞ –¥–≤–∏–≥–∞—Ç–µ–ª—è (—É—Å–∫–æ—Ä–µ–Ω–∏–µ) |
| üõë –ú–æ—â–Ω–æ—Å—Ç—å —Ç–æ—Ä–º–æ–∂–µ–Ω–∏—è | –°–∏–ª–∞ —Ç–æ—Ä–º–æ–∂–µ–Ω–∏—è |
| üîÑ –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–≤–æ—Ä–æ—Ç–∞ | –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–≤–æ—Ä–æ—Ç–∞ —Ä—É–ª—è |
| üåä –ó–∞—Ç—É—Ö–∞–Ω–∏–µ –ø–æ–≤–æ—Ä–æ—Ç–∞ | –°—Ü–µ–ø–ª–µ–Ω–∏–µ —à–∏–Ω (–±–æ–ª—å—à–µ = –º–µ–Ω—å—à–µ –¥—Ä–∏—Ñ—Ç–∞) |

**–ö–Ω–æ–ø–∫–∞ "üîÑ –°–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"** ‚Äî –≤–æ–∑–≤—Ä–∞—Ç –∫ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º.

### –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12):
```javascript
// –£–≤–µ–ª–∏—á–∏—Ç—å –º–æ—â–Ω–æ—Å—Ç—å
game.getPhysics().updateParams({ maxForce: 3000 });

// –ë–æ–ª—å—à–µ —Å–∫–æ–ª—å–∂–µ–Ω–∏—è (–¥—Ä–∏—Ñ—Ç)
game.getPhysics().updateParams({ frictionSlip: 1.0 });

// –ú—è–≥–∫–∞—è –ø–æ–¥–≤–µ—Å–∫–∞
game.getPhysics().updateParams({ suspensionStiffness: 20 });

// –ë—ã—Å—Ç—Ä—ã–π —Ä—É–ª—å
game.getPhysics().updateParams({ steerSpeed: 0.1 });
```

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```javascript
// –í js/Physics.js, this.params:
{
    maxForce: 1500,          // –°–∏–ª–∞ –¥–≤–∏–≥–∞—Ç–µ–ª—è (–ù)
    maxBrakeForce: 100,      // –°–∏–ª–∞ —Ç–æ—Ä–º–æ–∂–µ–Ω–∏—è (–ù)
    handbrakeForce: 150,     // –†—É—á–Ω–æ–π —Ç–æ—Ä–º–æ–∑ (–ù)
    maxSpeed: 25,            // –ú–∞–∫—Å. —Å–∫–æ—Ä–æ—Å—Ç—å (–º/—Å, ~90 –∫–º/—á)
    
    maxSteerVal: 0.5,        // –£–≥–æ–ª –ø–æ–≤–æ—Ä–æ—Ç–∞ –∫–æ–ª—ë—Å (~30¬∞)
    steerSpeed: 0.05,        // –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–≤–æ—Ä–æ—Ç–∞ —Ä—É–ª—è
    
    suspensionStiffness: 30,     // –ñ—ë—Å—Ç–∫–æ—Å—Ç—å –ø–æ–¥–≤–µ—Å–∫–∏
    suspensionDamping: 2.3,      // –ê–º–æ—Ä—Ç–∏–∑–∞—Ç–æ—Ä—ã
    frictionSlip: 2.0,           // –°—Ü–µ–ø–ª–µ–Ω–∏–µ —à–∏–Ω
    rollInfluence: 0.4,          // –ö—Ä–µ–Ω (—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å)
    
    chassisMass: 1500        // –ú–∞—Å—Å–∞ –≥—Ä—É–∑–æ–≤–∏–∫–∞ (–∫–≥)
}
```

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:
- **LOW** (2 –ì–ë RAM): 3 solver iterations ‚Üí 30+ FPS
- **AVERAGE** (4 –ì–ë RAM): 5 iterations ‚Üí 50+ FPS
- **HIGH** (8+ –ì–ë RAM): 10 iterations ‚Üí 60 FPS

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- Fixed timestep 1/60 —Å–µ–∫ (60 Hz) ‚Äî —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ñ–∏–∑–∏–∫–∞
- SAPBroadphase ‚Äî –±—ã—Å—Ç—Ä—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π
- –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π solver

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ì—Ä—É–∑–æ–≤–∏–∫ –Ω–µ –µ–¥–µ—Ç:
**–†–µ—à–µ–Ω–∏–µ:** –û—Ç–∫—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å (F12), –ø—Ä–æ–≤–µ—Ä—å:
```
[Physics] RaycastVehicle —Å–æ–∑–¥–∞–Ω, –∫–æ–ª—ë—Å: 4
```
–ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –ø—Ä–æ–±–ª–µ–º–∞ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π Cannon.js.

### –ì—Ä—É–∑–æ–≤–∏–∫ –ª–µ—Ç–∞–µ—Ç/–¥—ë—Ä–≥–∞–µ—Ç—Å—è:
**–†–µ—à–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á—å –∂—ë—Å—Ç–∫–æ—Å—Ç—å –ø–æ–¥–≤–µ—Å–∫–∏:
```javascript
game.getPhysics().updateParams({ suspensionStiffness: 40 });
```

### –ì—Ä—É–∑–æ–≤–∏–∫ —Å–ª–∏—à–∫–æ–º —Å–∫–æ–ª—å–∑–∫–∏–π:
**–†–µ—à–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á—å —Å—Ü–µ–ø–ª–µ–Ω–∏–µ:
```javascript
game.getPhysics().updateParams({ frictionSlip: 3.0 });
```

### –ì—Ä—É–∑–æ–≤–∏–∫ –ø–µ—Ä–µ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è:
**–†–µ—à–µ–Ω–∏–µ:** –£–º–µ–Ω—å—à–∏ –∫—Ä–µ–Ω:
```javascript
game.getPhysics().updateParams({ rollInfluence: 0.2 });
```

### –ù–∏–∑–∫–∏–π FPS:
**–†–µ—à–µ–Ω–∏–µ:** –í `js/Physics.js`, —Å—Ç—Ä–æ–∫–∞ ~52, –∏–∑–º–µ–Ω–∏:
```javascript
this.world.solver.iterations = 3;  // –ë—ã–ª–æ 5 –∏–ª–∏ 10
```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤

```
–≥–æ–Ω–æ—á–∫–∏/
‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îú‚îÄ‚îÄ Physics.js          ‚Üê –ù–û–í–´–ô! Cannon.js –¥–≤–∏–∂–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ Game.js             ‚Üê –ò–∑–º–µ–Ω—ë–Ω (—Å–æ–∑–¥–∞–Ω–∏–µ Physics)
‚îÇ   ‚îú‚îÄ‚îÄ main.js             ‚Üê –ò–∑–º–µ–Ω—ë–Ω (–ø–æ–ª–∑—É–Ω–∫–∏ ‚Üí Cannon.js)
‚îÇ   ‚îî‚îÄ‚îÄ models/
‚îÇ       ‚îî‚îÄ‚îÄ Truck.js        ‚Üê –ò–∑–º–µ–Ω—ë–Ω (wheelMeshes[])
‚îú‚îÄ‚îÄ index.html              ‚Üê –ò–∑–º–µ–Ω—ë–Ω (Cannon.js –≤ importmap)
‚îú‚îÄ‚îÄ –£–∂–µ —Å–¥–µ–ª–∞–Ω–æ.txt         ‚Üê –û–±–Ω–æ–≤–ª—ë–Ω
‚îú‚îÄ‚îÄ INTEGRATION_CANNON.md   ‚Üê –ù–û–í–´–ô! –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ –ö–†–ê–¢–ö–ê–Ø_–ò–ù–°–¢–†–£–ö–¶–ò–Ø.md   ‚Üê –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `INTEGRATION_CANNON.md`
- **Cannon.js API:** https://pmndrs.github.io/cannon-es/
- **RaycastVehicle:** https://pmndrs.github.io/cannon-es/classes/RaycastVehicle.html

---

## üéâ –ò—Ç–æ–≥

–¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å:
- ‚úÖ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –º–∞—Å—Å–∞ –∏ –∏–Ω–µ—Ä—Ü–∏—è (1500 –∫–≥)
- ‚úÖ –ù–∞—Å—Ç–æ—è—â–∞—è –ø–æ–¥–≤–µ—Å–∫–∞ (–ø—Ä—É–∂–∏–Ω—ã + –∞–º–æ—Ä—Ç–∏–∑–∞—Ç–æ—Ä—ã)
- ‚úÖ –î—Ä–∏—Ñ—Ç –∏ –∑–∞–Ω–æ—Å—ã (—Ä—É—á–Ω–∏–∫ –ü–†–û–ë–ï–õ)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ–≤–æ—Ä–æ—Ç—ã (—Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–¥–Ω–∏–µ –∫–æ–ª—ë—Å–∞)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (UI-–ø–æ–ª–∑—É–Ω–∫–∏)
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**–ó–∞–ø—É—Å–∫–∞–π –∏–≥—Ä—É –∏ —Ç–µ—Å—Ç–∏—Ä—É–π —Ñ–∏–∑–∏–∫—É –Ω–∞ —Å—Ç–∞–¥–∏–æ–Ω–µ! üèéÔ∏èüí®**

---

**–î–∞—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:** 29.12.2025  
**–í–µ—Ä—Å–∏—è Cannon.js:** 0.20.0  
**–í–µ—Ä—Å–∏—è Three.js:** 0.160.0  
**–ê–≤—Ç–æ—Ä:** Claude Sonnet 4.5

